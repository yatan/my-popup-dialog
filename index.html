<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
	<script type="text/javascript">

		$( document ).ready(function() {

			//Posicionament Centrat
			//Troba el punt central de la pantalla
			var wX = $(window).width() / 2;
			var wY = $(window).height() / 2;			

			//Troba el punt central del dialog
			var dX = $("#dialog").width() / 2;
			var dY = $("#dialog").height() / 2;

			//Centra el dialog sobre el punt central de la pantalla
			$("#dialog").css("left", wX - dX );
			$("#dialog").css("top" , wY - dY );


			

			$("#dialog").mouseover(function(e){
				//Es treballa amb el wrapper perque sino, hi ha cops que es toca el borde pero no conta com a tal, ja que el borde es interior. 
				//Troba les coordenades de la finestra que corresponen al centre del dialog en aquest moment
				var dX = $("#wrapper").offset().left + $("#wrapper").width() / 2 ;
				var dY = $("#wrapper").offset().top + $("#wrapper").height() / 2 ;

				if(e.pageX < dX && ( //Si el ratoli esta a la part esquerra del div i ....
					(e.pageY > $("#wrapper").offset().top) && // el ratoli esta per sota del TOP del div...
					(e.pageY < ($("#wrapper").offset().top + $("#wrapper").height())))){// i per sobre del BOTTOM del div....
					
					$("#dialog").css("cursor","w-resize");
				}
				else if(e.pageX > dX && ( 
					(e.pageY > $("#wrapper").offset().top) &&
					(e.pageY < ($("#wrapper").offset().top + $("#wrapper").height())))){
					
					$("#dialog").css("cursor","e-resize");
				}
				else if(e.pageY < dY && ( //Si el ratoli esta a la part superior del div i ....
					(e.pageX > $("#wrapper").offset().left) && // el ratoli esta a la dreta del left del div...
					(e.pageX < ($("#wrapper").offset().left + $("#wrapper").width()// i per la esquerra del right del div....
					)))){
					$("#dialog").css("cursor","n-resize");
				}
				else{
					$("#dialog").css("cursor","s-resize");
				}
			});


			//Fa que el div sigui dragable nomes fent clic a la barra
			$('#bar').mouseenter(function(){
				$( "#dialog" ).draggable({ disabled: false });
			}).mouseleave(function(){
				$("#dialog").draggable({ disabled: true });
			});





		});


/* 
$( document ).ready(function() {
    	$("#dialog").click(function(e){
    		$("#dialog").mousemove(function(e){
    			$("#dialog").css("top",e.pageY-$("#dialog").height()/2);
    			$("#dialog").css("left",e.pageX-$("#dialog").width()/2);
    		})
    	})
	});
*/




</script>
<style type="text/css">

	#dialog{
		background-color: #c1c1c1;
		width: 300px;
		height: 150px;
		position: absolute;
		border:5px solid gray;
	}
	#wrapper:hover{
		cursor:default;
	}
	#bar{
		background-color:gray;
		width: 100%;
		height: 30px;

	}
	#bar #close-dialog{
		float:right;
		background-color: #b13939;
		position:absolute;
		top:-5px;
		left:86%;
		width:40px;
		text-align:center;
		color:white;
		font-family: Arial, Helvetica, sans-serif;
		transition: background-color 0.2s;
		cursor:default;
	}
	#bar #close-dialog:hover{
		background-color: #e60000;
		transition: background-color 0.2s;
	}
	#content{
		background-color: white;
		width: 100%;
		height: 80px;
	}
	#buttons{
		background-color:white;
		width: 100%;
		height: 40px;
		
	}


</style>
<title></title>
</head>
<body>

	<div id="dialog">
		<div id="wrapper">
			<div id="bar">
				<div id="close-dialog">x</div>
			</div>
			<div id="content"></div>
			<div id="buttons"></div>
		</div>
	</div>






</body>
</html>